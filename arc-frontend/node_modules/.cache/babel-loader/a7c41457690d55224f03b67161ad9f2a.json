{"ast":null,"code":"var _jsxFileName = \"/Users/AustinCai/Desktop/CS 370/ARC/arc-art-critique/arc-frontend/src/components/comment.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Modal from 'react-bootstrap/Modal';\nimport { Button, Form, Figure } from 'react-bootstrap';\nimport Axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport Divider from '@mui/material/Divider';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemAvatar from '@mui/material/ListItemAvatar';\nimport Avatar from '@mui/material/Avatar';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Comment(props) {\n  _s();\n\n  // console.log(props.entry._id);\n  const [isLiked, setLikeState] = useState(false);\n  const [isLoggedIn, setLoggedIn] = useState(false);\n  const [loggedInUser, setLoggedInUser] = useState('');\n  const [errorMessage, setErrMessage] = useState('');\n  const [message, setMessage] = useState('');\n  const [commentlist, setCommentlist] = useState([]);\n  const history = useHistory();\n  useEffect(() => {\n    Axios.get(\"/api/login\").then(response => {\n      if (response.data.loggedIn == true) {\n        console.log(response.data.user._id);\n        setLoggedIn(true);\n        setLoggedInUser(response.data.user._id);\n      }\n\n      ;\n    }).catch(error => {\n      setErrMessage(\"Error encountered on the server.\");\n    });\n    let post = {\n      post_id: props.entry._id\n    };\n    console.log(post);\n    Axios.post(\"/comments/all\", post).then(response => {\n      console.log(response.data);\n      setCommentlist(response.data);\n    }).catch(error => {\n      setErrMessage(\"Error encountered on the server.\");\n    });\n  }, [props.entry._id]);\n\n  function handleClicked() {\n    setLikeState(!isLiked);\n  } // function empty(){\n  //   setCommentlist([]);\n  // }\n\n\n  function comment(e) {\n    let comment = {\n      postId: props.entry._id,\n      userId: loggedInUser,\n      comment: document.getElementById('comment').value\n    };\n    Axios.post('/comments', comment).then(function (response) {\n      if (response.data.status == \"error\") {\n        setMessage('');\n        setErrMessage(response.data.error);\n        console.log(response.data.error);\n      } else {\n        setMessage(\"Comment created successfully!\");\n        setErrMessage('');\n      }\n\n      console.log(response.data);\n    }).catch(error => {\n      setErrMessage(\"Error encountered on the server.\");\n    });\n    e.preventDefault(); // props.onHide();\n    //history.push(\"/\");\n  }\n\n  function close(e) {\n    props.onHide(e);\n    setMessage('');\n    setErrMessage('');\n  }\n\n  ;\n\n  function deletep(e) {\n    console.log(\"delete clicked\");\n    let deletep = {\n      postId: props.entry._id,\n      userId: loggedInUser\n    };\n    Axios.post('posts/deleteOnePost', deletep).then(function (response) {\n      if (response.data[\"error\"]) {\n        setMessage('');\n        setErrMessage(\"delete failed\");\n        console.log(response.data[\"delete post\"]);\n      }\n    }).catch(error => {\n      setErrMessage(\"Error encountered on the server.\");\n    });\n    props.onHide(e);\n    history.push(\"/\");\n  } // console.log(commentlist);\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Modal, { ...props,\n      size: \"lg\",\n      animation: false,\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        onClick: close,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Post Detail Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(Figure, {\n            children: /*#__PURE__*/_jsxDEV(Figure.Image, {\n              style: {\n                maxHeight: \"500px\",\n                borderRadius: \"20px\",\n                padding: '3%'\n              },\n              alt: \"171x180\",\n              src: \"data:image/png;base64, \" + props.entry.image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"titleText\",\n            children: props.entry.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"secondaryText\",\n            children: props.entry.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            className: \"commentForm\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"commentBox mb-3\",\n              children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                size: \"lg\",\n                id: \"comment\",\n                placeholder: \"Leave a comment here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 5\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"buttonText\",\n              onClick: comment,\n              size: \"md\",\n              variant: \"secondary\",\n              type: \"submit\",\n              children: \"Comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n            style: {\n              color: 'red'\n            },\n            children: errorMessage != \"\" ? errorMessage : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n            style: {\n              color: 'green'\n            },\n            children: message != \"\" ? message : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(List, {\n            sx: {\n              width: '100%',\n              maxWidth: 360,\n              bgcolor: 'background.paper'\n            },\n            children: props.entry.userinfo == loggedInUser && commentlist ? commentlist.map(comment => /*#__PURE__*/_jsxDEV(ListItem, {\n              style: {\n                paddingLeft: 0\n              },\n              alignItems: \"flex-start\",\n              children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n                children: /*#__PURE__*/_jsxDEV(Avatar, {\n                  alt: \"Remy Sharp\",\n                  src: \"/static/images/avatar/1.jpg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: \"anonymous user\",\n                r: true,\n                secondary: /*#__PURE__*/_jsxDEV(React.Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    sx: {\n                      display: 'inline'\n                    },\n                    component: \"span\",\n                    variant: \"body2\",\n                    color: \"text.primary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 15\n                  }, this), comment.comment]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 7\n            }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [props.entry.userinfo == loggedInUser ? /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          size: \"lg\",\n          onClick: deletep,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 2\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-secondary\",\n          size: \"lg\",\n          onClick: close,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 2\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n\n_s(Comment, \"W3+rxMyG8hPEr5eVnswNDmJu+jQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["/Users/AustinCai/Desktop/CS 370/ARC/arc-art-critique/arc-frontend/src/components/comment.js"],"names":["React","useState","useEffect","useContext","Modal","Button","Form","Figure","Axios","useHistory","List","ListItem","Divider","ListItemText","ListItemAvatar","Avatar","Grid","Typography","Comment","props","isLiked","setLikeState","isLoggedIn","setLoggedIn","loggedInUser","setLoggedInUser","errorMessage","setErrMessage","message","setMessage","commentlist","setCommentlist","history","get","then","response","data","loggedIn","console","log","user","_id","catch","error","post","post_id","entry","handleClicked","comment","e","postId","userId","document","getElementById","value","status","preventDefault","close","onHide","deletep","push","maxHeight","borderRadius","padding","image","title","description","color","width","maxWidth","bgcolor","userinfo","map","paddingLeft","display"],"mappings":"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","sourcesContent":["import React, { useState,useEffect, useContext } from \"react\";\nimport Modal from 'react-bootstrap/Modal';\nimport {Button, Form, Figure} from 'react-bootstrap';\nimport Axios from \"axios\";\nimport {useHistory} from \"react-router-dom\";\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport Divider from '@mui/material/Divider';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemAvatar from '@mui/material/ListItemAvatar';\nimport Avatar from '@mui/material/Avatar';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\n\n\nfunction Comment(props) {\n  // console.log(props.entry._id);\n  const [isLiked, setLikeState] = useState(false);\n  const [isLoggedIn, setLoggedIn]=useState(false);\n  const [loggedInUser,setLoggedInUser]=useState('');\n  const[errorMessage,setErrMessage]=useState('');\n  const[message,setMessage]=useState('');\n  const[commentlist,setCommentlist]=useState([]);\n  const history=useHistory();\n  useEffect(()=>{\n    Axios.get(\"/api/login\").then((response)=>{\n      if(response.data.loggedIn==true){\n        console.log(response.data.user._id);\n        setLoggedIn(true);\n        setLoggedInUser(response.data.user._id);\n      };\n    }).catch((error)=> {\n      setErrMessage(\"Error encountered on the server.\");\n    }); \n    let post={post_id:props.entry._id};\n    console.log(post);\n    Axios.post(\"/comments/all\",post).then((response)=>{\n      console.log(response.data);\n      setCommentlist(response.data);\n\n    }).catch((error)=> {\n      setErrMessage(\"Error encountered on the server.\");\n    }); \n   },[props.entry._id]);\n  function handleClicked(){\n    setLikeState(!isLiked);\n  }\n  // function empty(){\n  //   setCommentlist([]);\n  // }\n  function comment(e){\n  let comment={\n    postId:props.entry._id,\n    userId:loggedInUser,\n    comment:document.getElementById('comment').value\n  }\n  Axios.post('/comments',comment).then(function(response){\n    if(response.data.status==\"error\"){\n      setMessage('');\n      setErrMessage(response.data.error);\n      console.log(response.data.error);\n    }else{\n      setMessage(\"Comment created successfully!\");\n      setErrMessage('');\n    }\n    console.log(response.data);\n    \n  }).catch((error)=> {\n    setErrMessage(\"Error encountered on the server.\");\n  });\n  e.preventDefault();\n  // props.onHide();\n  //history.push(\"/\");\n}\n\nfunction close(e){\n  props.onHide(e); \n  setMessage('');\n  setErrMessage('');   \n};\nfunction deletep(e){\n  console.log(\"delete clicked\");\n  let deletep={\n    postId:props.entry._id,\n    userId:loggedInUser\n  }\n  Axios.post('posts/deleteOnePost',deletep).then(function(response){\n    if(response.data[\"error\"]){\n      setMessage('');\n      setErrMessage(\"delete failed\");\n      console.log(response.data[\"delete post\"]);\n    } \n    \n  }).catch((error)=> {\n    setErrMessage(\"Error encountered on the server.\");\n  });\n  props.onHide(e);\n  history.push(\"/\");\n}\n// console.log(commentlist);\n  return (\n    <>  \n    <Modal {...props}   size=\"lg\" animation={false}  centered >\n     \n      <Modal.Header closeButton onClick={close}>\n        <Modal.Title>Post Detail Page</Modal.Title>\n      </Modal.Header>\n      <Grid container spacing={2}>\n      <Grid  item xs={6} >\n    <Figure>\n        <Figure.Image\n        style={{maxHeight:\"500px\",borderRadius:\"20px\",padding:'3%'}}\n          alt=\"171x180\"\n          src={\"data:image/png;base64, \" + props.entry.image}\n        />        \n      </Figure>\n      </Grid>\n    <Grid item xs={6}>\n\n        <h1 className='titleText'>\n        {props.entry.title}  \n          </h1>\n          <h4 className='secondaryText'>\n          {props.entry.description}\n          </h4>\n          <Form className='commentForm'>\n      <Form.Group className=\"commentBox mb-3\" >\n    <Form.Control  \n      size=\"lg\"\n      id='comment'\n      placeholder=\"Leave a comment here\"\n    />\n      </Form.Group>\n      <Button className='buttonText' onClick={comment} size=\"md\" variant=\"secondary\" type=\"submit\">\n          Comment\n        </Button>\n     </Form>\n     <Form.Text style={{color:'red'}}>\n          {errorMessage!=\"\"?errorMessage:''}\n          </Form.Text>\n      <Form.Text style={{color:'green'}}>\n          {message!=\"\"?message:''}\n          </Form.Text>\n     <List sx={{ width: '100%', maxWidth: 360, bgcolor: 'background.paper' }}>\n    {props.entry.userinfo==loggedInUser && commentlist?\n    commentlist.map((comment)=>(\n  \n      <ListItem style={{paddingLeft:0}} alignItems=\"flex-start\">\n        <ListItemAvatar>\n          <Avatar alt=\"Remy Sharp\" src=\"/static/images/avatar/1.jpg\" />\n        </ListItemAvatar>\n        <ListItemText\n          primary=\"anonymous user\"r\n          secondary={\n            <React.Fragment>\n              <Typography\n                sx={{ display: 'inline' }}\n                component=\"span\"\n                variant=\"body2\"\n                color=\"text.primary\"\n              >\n              </Typography>\n              {comment.comment}\n            </React.Fragment>\n          }\n        />\n      </ListItem>\n      \n    ))\n      :<div></div>\n    }\n    </List>\n    {/* <List sx={{ width: '100%', maxWidth: 360, bgcolor: 'background.paper' }}>\n    {commentlist.map((comment)=>{\n      (props.entry.userinfo==loggedInUser)?\n      <ListItem style={{paddingLeft:0}} alignItems=\"flex-start\">\n        <ListItemAvatar>\n          <Avatar alt=\"Remy Sharp\" src=\"/static/images/avatar/1.jpg\" />\n        </ListItemAvatar>\n        <ListItemText\n          primary=\"anonymous user\"r\n          secondary={\n            <React.Fragment>\n              <Typography\n                sx={{ display: 'inline' }}\n                component=\"span\"\n                variant=\"body2\"\n                color=\"text.primary\"\n              >\n              </Typography>\n              {comment.comment}\n            </React.Fragment>\n          }\n        />\n      </ListItem>:<div></div>\n    })}\n    </List> */}\n    </Grid>\n  </Grid>\n\n \n      \n      \n <Modal.Footer>\n {props.entry.userinfo==loggedInUser?\n <Button variant=\"danger\" size=\"lg\" onClick={deletep}>\n          Delete\n        </Button>:<div></div>}\n        <Button variant=\"outline-secondary\" size=\"lg\" onClick={close}>\n          Close\n        </Button>\n      </Modal.Footer>\n  \n    </Modal>\n   \n  </>\n  )\n}\n\nexport default Comment;"]},"metadata":{},"sourceType":"module"}