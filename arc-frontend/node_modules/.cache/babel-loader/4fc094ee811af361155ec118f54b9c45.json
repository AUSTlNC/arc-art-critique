{"ast":null,"code":"/*!\n * FilePondPluginImageExifOrientation 1.0.11\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.FilePondPluginImageExifOrientation = factory());\n})(this, function () {\n  'use strict'; // test if file is of type image\n\n  var isJPEG = function isJPEG(file) {\n    return /^image\\/jpeg/.test(file.type);\n  };\n\n  var Marker = {\n    JPEG: 0xffd8,\n    APP1: 0xffe1,\n    EXIF: 0x45786966,\n    TIFF: 0x4949,\n    Orientation: 0x0112,\n    Unknown: 0xff00\n  };\n\n  var getUint16 = function getUint16(view, offset) {\n    var little = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint16(offset, little);\n  };\n\n  var getUint32 = function getUint32(view, offset) {\n    var little = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint32(offset, little);\n  };\n\n  var getImageOrientation = function getImageOrientation(file) {\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n\n      reader.onload = function (e) {\n        var view = new DataView(e.target.result); // Every JPEG file starts from binary value '0xFFD8'\n\n        if (getUint16(view, 0) !== Marker.JPEG) {\n          // This aint no JPEG\n          resolve(-1);\n          return;\n        }\n\n        var length = view.byteLength;\n        var offset = 2;\n\n        while (offset < length) {\n          var marker = getUint16(view, offset);\n          offset += 2; // There's our APP1 Marker\n\n          if (marker === Marker.APP1) {\n            if (getUint32(view, offset += 2) !== Marker.EXIF) {\n              // no EXIF info defined\n              break;\n            } // Get TIFF Header\n\n\n            var little = getUint16(view, offset += 6) === Marker.TIFF;\n            offset += getUint32(view, offset + 4, little);\n            var tags = getUint16(view, offset, little);\n            offset += 2;\n\n            for (var i = 0; i < tags; i++) {\n              // found the orientation tag\n              if (getUint16(view, offset + i * 12, little) === Marker.Orientation) {\n                resolve(getUint16(view, offset + i * 12 + 8, little));\n                return;\n              }\n            }\n          } else if ((marker & Marker.Unknown) !== Marker.Unknown) {\n            // Invalid\n            break;\n          } else {\n            offset += getUint16(view, offset);\n          }\n        } // Nothing found\n\n\n        resolve(-1);\n      }; // we don't need to read the entire file to get the orientation\n\n\n      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n    });\n  };\n\n  var IS_BROWSER = function () {\n    return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  }();\n\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  }; // 2x1 pixel image 90CW rotated with orientation header\n\n\n  var testSrc = 'data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k='; // should correct orientation if is presented in landscape, in which case the browser doesn't autocorrect\n\n  var shouldCorrect = undefined;\n  var testImage = isBrowser() ? new Image() : {};\n\n  testImage.onload = function () {\n    return shouldCorrect = testImage.naturalWidth > testImage.naturalHeight;\n  };\n\n  testImage.src = testSrc;\n\n  var shouldCorrectImageExifOrientation = function shouldCorrectImageExifOrientation() {\n    return shouldCorrect;\n  };\n  /**\n   * Read Image Orientation Plugin\n   */\n\n\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n        utils = _ref.utils;\n    var Type = utils.Type,\n        isFile = utils.isFile; // subscribe to file load and append required info\n\n    addFilter('DID_LOAD_ITEM', function (item, _ref2) {\n      var query = _ref2.query;\n      return new Promise(function (resolve, reject) {\n        // get file reference\n        var file = item.file; // if this is not a jpeg image we are not interested\n\n        if (!isFile(file) || !isJPEG(file) || !query('GET_ALLOW_IMAGE_EXIF_ORIENTATION') || !shouldCorrectImageExifOrientation()) {\n          // continue with the unaltered dataset\n          return resolve(item);\n        } // get orientation from exif data\n\n\n        getImageOrientation(file).then(function (orientation) {\n          item.setMetadata('exif', {\n            orientation: orientation\n          });\n          resolve(item);\n        });\n      });\n    }); // Expose plugin options\n\n    return {\n      options: {\n        // Enable or disable image orientation reading\n        allowImageExifOrientation: [true, Type.BOOLEAN]\n      }\n    };\n  }; // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n\n\n  var isBrowser$1 = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\n  if (isBrowser$1) {\n    document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', {\n      detail: plugin\n    }));\n  }\n\n  return plugin;\n});","map":{"version":3,"sources":["/Users/AustinCai/Desktop/CS 370/ARC/Arc-FrontEnd-2.0/node_modules/filepond-plugin-image-exif-orientation/dist/filepond-plugin-image-exif-orientation.js"],"names":["global","factory","exports","module","define","amd","self","FilePondPluginImageExifOrientation","isJPEG","file","test","type","Marker","JPEG","APP1","EXIF","TIFF","Orientation","Unknown","getUint16","view","offset","little","arguments","length","undefined","getUint32","getImageOrientation","Promise","resolve","reject","reader","FileReader","onload","e","DataView","target","result","byteLength","marker","tags","i","readAsArrayBuffer","slice","IS_BROWSER","window","document","isBrowser","testSrc","shouldCorrect","testImage","Image","naturalWidth","naturalHeight","src","shouldCorrectImageExifOrientation","plugin","_ref","addFilter","utils","Type","isFile","item","_ref2","query","then","orientation","setMetadata","options","allowImageExifOrientation","BOOLEAN","isBrowser$1","dispatchEvent","CustomEvent","detail"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AAEA,CAAC,UAASA,MAAT,EAAiBC,OAAjB,EAA0B;AACzB,SAAOC,OAAP,KAAmB,QAAnB,IAA+B,OAAOC,MAAP,KAAkB,WAAjD,GACKA,MAAM,CAACD,OAAP,GAAiBD,OAAO,EAD7B,GAEI,OAAOG,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAAvC,GACAD,MAAM,CAACH,OAAD,CADN,IAEED,MAAM,GAAGA,MAAM,IAAIM,IAApB,EACAN,MAAM,CAACO,kCAAP,GAA4CN,OAAO,EAHpD,CAFJ;AAMD,CAPD,EAOG,IAPH,EAOS,YAAW;AAClB,eADkB,CAGlB;;AACA,MAAIO,MAAM,GAAG,SAASA,MAAT,CAAgBC,IAAhB,EAAsB;AACjC,WAAO,eAAeC,IAAf,CAAoBD,IAAI,CAACE,IAAzB,CAAP;AACD,GAFD;;AAIA,MAAIC,MAAM,GAAG;AACXC,IAAAA,IAAI,EAAE,MADK;AAEXC,IAAAA,IAAI,EAAE,MAFK;AAGXC,IAAAA,IAAI,EAAE,UAHK;AAIXC,IAAAA,IAAI,EAAE,MAJK;AAKXC,IAAAA,WAAW,EAAE,MALF;AAMXC,IAAAA,OAAO,EAAE;AANE,GAAb;;AASA,MAAIC,SAAS,GAAG,SAASA,SAAT,CAAmBC,IAAnB,EAAyBC,MAAzB,EAAiC;AAC/C,QAAIC,MAAM,GACRC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,KADtE;AAEA,WAAOH,IAAI,CAACD,SAAL,CAAeE,MAAf,EAAuBC,MAAvB,CAAP;AACD,GAJD;;AAKA,MAAII,SAAS,GAAG,SAASA,SAAT,CAAmBN,IAAnB,EAAyBC,MAAzB,EAAiC;AAC/C,QAAIC,MAAM,GACRC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,KADtE;AAEA,WAAOH,IAAI,CAACM,SAAL,CAAeL,MAAf,EAAuBC,MAAvB,CAAP;AACD,GAJD;;AAMA,MAAIK,mBAAmB,GAAG,SAASA,mBAAT,CAA6BlB,IAA7B,EAAmC;AAC3D,WAAO,IAAImB,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C,UAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;;AACAD,MAAAA,MAAM,CAACE,MAAP,GAAgB,UAASC,CAAT,EAAY;AAC1B,YAAId,IAAI,GAAG,IAAIe,QAAJ,CAAaD,CAAC,CAACE,MAAF,CAASC,MAAtB,CAAX,CAD0B,CAG1B;;AACA,YAAIlB,SAAS,CAACC,IAAD,EAAO,CAAP,CAAT,KAAuBR,MAAM,CAACC,IAAlC,EAAwC;AACtC;AACAgB,UAAAA,OAAO,CAAC,CAAC,CAAF,CAAP;AACA;AACD;;AAED,YAAIL,MAAM,GAAGJ,IAAI,CAACkB,UAAlB;AACA,YAAIjB,MAAM,GAAG,CAAb;;AAEA,eAAOA,MAAM,GAAGG,MAAhB,EAAwB;AACtB,cAAIe,MAAM,GAAGpB,SAAS,CAACC,IAAD,EAAOC,MAAP,CAAtB;AACAA,UAAAA,MAAM,IAAI,CAAV,CAFsB,CAItB;;AACA,cAAIkB,MAAM,KAAK3B,MAAM,CAACE,IAAtB,EAA4B;AAC1B,gBAAIY,SAAS,CAACN,IAAD,EAAQC,MAAM,IAAI,CAAlB,CAAT,KAAmCT,MAAM,CAACG,IAA9C,EAAoD;AAClD;AACA;AACD,aAJyB,CAM1B;;;AACA,gBAAIO,MAAM,GAAGH,SAAS,CAACC,IAAD,EAAQC,MAAM,IAAI,CAAlB,CAAT,KAAmCT,MAAM,CAACI,IAAvD;AACAK,YAAAA,MAAM,IAAIK,SAAS,CAACN,IAAD,EAAOC,MAAM,GAAG,CAAhB,EAAmBC,MAAnB,CAAnB;AAEA,gBAAIkB,IAAI,GAAGrB,SAAS,CAACC,IAAD,EAAOC,MAAP,EAAeC,MAAf,CAApB;AACAD,YAAAA,MAAM,IAAI,CAAV;;AAEA,iBAAK,IAAIoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAApB,EAA0BC,CAAC,EAA3B,EAA+B;AAC7B;AACA,kBACEtB,SAAS,CAACC,IAAD,EAAOC,MAAM,GAAGoB,CAAC,GAAG,EAApB,EAAwBnB,MAAxB,CAAT,KAA6CV,MAAM,CAACK,WADtD,EAEE;AACAY,gBAAAA,OAAO,CAACV,SAAS,CAACC,IAAD,EAAOC,MAAM,GAAGoB,CAAC,GAAG,EAAb,GAAkB,CAAzB,EAA4BnB,MAA5B,CAAV,CAAP;AAEA;AACD;AACF;AACF,WAvBD,MAuBO,IAAI,CAACiB,MAAM,GAAG3B,MAAM,CAACM,OAAjB,MAA8BN,MAAM,CAACM,OAAzC,EAAkD;AACvD;AACA;AACD,WAHM,MAGA;AACLG,YAAAA,MAAM,IAAIF,SAAS,CAACC,IAAD,EAAOC,MAAP,CAAnB;AACD;AACF,SA/CyB,CAiD1B;;;AACAQ,QAAAA,OAAO,CAAC,CAAC,CAAF,CAAP;AACD,OAnDD,CAF2C,CAuD3C;;;AACAE,MAAAA,MAAM,CAACW,iBAAP,CAAyBjC,IAAI,CAACkC,KAAL,CAAW,CAAX,EAAc,KAAK,IAAnB,CAAzB;AACD,KAzDM,CAAP;AA0DD,GA3DD;;AA6DA,MAAIC,UAAU,GAAI,YAAW;AAC3B,WACE,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,MAAM,CAACC,QAAd,KAA2B,WAD9D;AAGD,GAJgB,EAAjB;;AAKA,MAAIC,SAAS,GAAG,SAASA,SAAT,GAAqB;AACnC,WAAOH,UAAP;AACD,GAFD,CA9FkB,CAkGlB;;;AACA,MAAII,OAAO,GACT,wTADF,CAnGkB,CAsGlB;;AACA,MAAIC,aAAa,GAAGxB,SAApB;AACA,MAAIyB,SAAS,GAAGH,SAAS,KAAK,IAAII,KAAJ,EAAL,GAAmB,EAA5C;;AACAD,EAAAA,SAAS,CAACjB,MAAV,GAAmB,YAAW;AAC5B,WAAQgB,aAAa,GAAGC,SAAS,CAACE,YAAV,GAAyBF,SAAS,CAACG,aAA3D;AACD,GAFD;;AAGAH,EAAAA,SAAS,CAACI,GAAV,GAAgBN,OAAhB;;AAEA,MAAIO,iCAAiC,GAAG,SAASA,iCAAT,GAA6C;AACnF,WAAON,aAAP;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAIO,MAAM,GAAG,SAASA,MAAT,CAAgBC,IAAhB,EAAsB;AACjC,QAAIC,SAAS,GAAGD,IAAI,CAACC,SAArB;AAAA,QACEC,KAAK,GAAGF,IAAI,CAACE,KADf;AAEA,QAAIC,IAAI,GAAGD,KAAK,CAACC,IAAjB;AAAA,QACEC,MAAM,GAAGF,KAAK,CAACE,MADjB,CAHiC,CAMjC;;AACAH,IAAAA,SAAS,CAAC,eAAD,EAAkB,UAASI,IAAT,EAAeC,KAAf,EAAsB;AAC/C,UAAIC,KAAK,GAAGD,KAAK,CAACC,KAAlB;AACA,aAAO,IAAIpC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C;AACA,YAAIrB,IAAI,GAAGqD,IAAI,CAACrD,IAAhB,CAF2C,CAI3C;;AACA,YACE,CAACoD,MAAM,CAACpD,IAAD,CAAP,IACA,CAACD,MAAM,CAACC,IAAD,CADP,IAEA,CAACuD,KAAK,CAAC,kCAAD,CAFN,IAGA,CAACT,iCAAiC,EAJpC,EAKE;AACA;AACA,iBAAO1B,OAAO,CAACiC,IAAD,CAAd;AACD,SAb0C,CAe3C;;;AACAnC,QAAAA,mBAAmB,CAAClB,IAAD,CAAnB,CAA0BwD,IAA1B,CAA+B,UAASC,WAAT,EAAsB;AACnDJ,UAAAA,IAAI,CAACK,WAAL,CAAiB,MAAjB,EAAyB;AAAED,YAAAA,WAAW,EAAEA;AAAf,WAAzB;AACArC,UAAAA,OAAO,CAACiC,IAAD,CAAP;AACD,SAHD;AAID,OApBM,CAAP;AAqBD,KAvBQ,CAAT,CAPiC,CAgCjC;;AACA,WAAO;AACLM,MAAAA,OAAO,EAAE;AACP;AACAC,QAAAA,yBAAyB,EAAE,CAAC,IAAD,EAAOT,IAAI,CAACU,OAAZ;AAFpB;AADJ,KAAP;AAMD,GAvCD,CArHkB,CA8JlB;;;AACA,MAAIC,WAAW,GACb,OAAO1B,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,MAAM,CAACC,QAAd,KAA2B,WAD9D;;AAEA,MAAIyB,WAAJ,EAAiB;AACfzB,IAAAA,QAAQ,CAAC0B,aAAT,CACE,IAAIC,WAAJ,CAAgB,uBAAhB,EAAyC;AAAEC,MAAAA,MAAM,EAAElB;AAAV,KAAzC,CADF;AAGD;;AAED,SAAOA,MAAP;AACD,CA/KD","sourcesContent":["/*!\n * FilePondPluginImageExifOrientation 1.0.11\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImageExifOrientation = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image\n  var isJPEG = function isJPEG(file) {\n    return /^image\\/jpeg/.test(file.type);\n  };\n\n  var Marker = {\n    JPEG: 0xffd8,\n    APP1: 0xffe1,\n    EXIF: 0x45786966,\n    TIFF: 0x4949,\n    Orientation: 0x0112,\n    Unknown: 0xff00\n  };\n\n  var getUint16 = function getUint16(view, offset) {\n    var little =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint16(offset, little);\n  };\n  var getUint32 = function getUint32(view, offset) {\n    var little =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint32(offset, little);\n  };\n\n  var getImageOrientation = function getImageOrientation(file) {\n    return new Promise(function(resolve, reject) {\n      var reader = new FileReader();\n      reader.onload = function(e) {\n        var view = new DataView(e.target.result);\n\n        // Every JPEG file starts from binary value '0xFFD8'\n        if (getUint16(view, 0) !== Marker.JPEG) {\n          // This aint no JPEG\n          resolve(-1);\n          return;\n        }\n\n        var length = view.byteLength;\n        var offset = 2;\n\n        while (offset < length) {\n          var marker = getUint16(view, offset);\n          offset += 2;\n\n          // There's our APP1 Marker\n          if (marker === Marker.APP1) {\n            if (getUint32(view, (offset += 2)) !== Marker.EXIF) {\n              // no EXIF info defined\n              break;\n            }\n\n            // Get TIFF Header\n            var little = getUint16(view, (offset += 6)) === Marker.TIFF;\n            offset += getUint32(view, offset + 4, little);\n\n            var tags = getUint16(view, offset, little);\n            offset += 2;\n\n            for (var i = 0; i < tags; i++) {\n              // found the orientation tag\n              if (\n                getUint16(view, offset + i * 12, little) === Marker.Orientation\n              ) {\n                resolve(getUint16(view, offset + i * 12 + 8, little));\n\n                return;\n              }\n            }\n          } else if ((marker & Marker.Unknown) !== Marker.Unknown) {\n            // Invalid\n            break;\n          } else {\n            offset += getUint16(view, offset);\n          }\n        }\n\n        // Nothing found\n        resolve(-1);\n      };\n\n      // we don't need to read the entire file to get the orientation\n      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n    });\n  };\n\n  var IS_BROWSER = (function() {\n    return (\n      typeof window !== 'undefined' && typeof window.document !== 'undefined'\n    );\n  })();\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  };\n\n  // 2x1 pixel image 90CW rotated with orientation header\n  var testSrc =\n    'data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=';\n\n  // should correct orientation if is presented in landscape, in which case the browser doesn't autocorrect\n  var shouldCorrect = undefined;\n  var testImage = isBrowser() ? new Image() : {};\n  testImage.onload = function() {\n    return (shouldCorrect = testImage.naturalWidth > testImage.naturalHeight);\n  };\n  testImage.src = testSrc;\n\n  var shouldCorrectImageExifOrientation = function shouldCorrectImageExifOrientation() {\n    return shouldCorrect;\n  };\n\n  /**\n   * Read Image Orientation Plugin\n   */\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    var Type = utils.Type,\n      isFile = utils.isFile;\n\n    // subscribe to file load and append required info\n    addFilter('DID_LOAD_ITEM', function(item, _ref2) {\n      var query = _ref2.query;\n      return new Promise(function(resolve, reject) {\n        // get file reference\n        var file = item.file;\n\n        // if this is not a jpeg image we are not interested\n        if (\n          !isFile(file) ||\n          !isJPEG(file) ||\n          !query('GET_ALLOW_IMAGE_EXIF_ORIENTATION') ||\n          !shouldCorrectImageExifOrientation()\n        ) {\n          // continue with the unaltered dataset\n          return resolve(item);\n        }\n\n        // get orientation from exif data\n        getImageOrientation(file).then(function(orientation) {\n          item.setMetadata('exif', { orientation: orientation });\n          resolve(item);\n        });\n      });\n    });\n\n    // Expose plugin options\n    return {\n      options: {\n        // Enable or disable image orientation reading\n        allowImageExifOrientation: [true, Type.BOOLEAN]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser$1 =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser$1) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n"]},"metadata":{},"sourceType":"script"}