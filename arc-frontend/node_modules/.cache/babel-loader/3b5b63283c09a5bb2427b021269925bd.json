{"ast":null,"code":"var _jsxFileName = \"/Users/AustinCai/Desktop/CS 370/ARC/Arc-FrontEnd-2.0/src/components/gallery.jsx\",\n    _s = $RefreshSig$();\n\nimport { Button } from 'react-bootstrap';\nimport React, { useState, useContext, useEffect } from \"react\";\nimport Comment from \"./comment\";\nimport ImageList from \"@mui/material/ImageList\";\nimport ImageListItem from '@mui/material/ImageListItem';\nimport Axios from \"axios\";\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport ReactLoading from 'react-loading';\nimport { Loader } from 'semantic-ui-react';\nimport { display } from '@mui/system';\nimport useInfiniteScroll from \"./useInfiniteScroll\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ButtonS = styled.button`\nfont-size: 15;\nbackground:none;\ncolor: white;\nborder:none;\nmargin:10;\npadding:0;\ncursor: pointer;\n`;\nconst ButtonToggle = styled(ButtonS)`\n  opacity: 0.6;\n  ${({\n  active\n}) => active && `\n    opacity: 1;\n  `}\n`;\n_c = ButtonToggle;\nconst ButtonGroup = styled.div`\n  display: flex;\n`;\n_c2 = ButtonGroup;\nconst types = ['All', 'Artwork', 'Photography'];\nexport function Gallery(props) {\n  _s();\n\n  const [commentState, setCommentState] = useState(false);\n  const [isLoggedIn, setLoggedIn] = useState(false);\n  const [loggedInUser, setLoggedInUser] = useState('');\n  const [sentEntry, setSentEntry] = useState([]);\n  const [active, setActive] = useState('All');\n  const [load, setLoading] = useState(false);\n  const [index, setIndex] = useState(0);\n\n  function loadMore() {\n    setLoading(true);\n    console.log('loading more');\n    setIndex(index + 4);\n    setdimage(displayimage.slice(0, index + 4));\n    console.log(index);\n    console.log(dimage);\n    setIsFetching(false);\n    setLoading(false);\n  }\n\n  const [isFetching, setIsFetching] = useState(useInfiniteScroll(loadMore));\n  const [dimage, setdimage] = useState([]);\n  const [displayimage, setDisplayimage] = useState([]);\n  const [errorMessage, setErrMessage] = useState('');\n\n  function clickMe(event, entry) {\n    // event.preventDefault();   \n    setCommentState(true);\n    setSentEntry(entry);\n  }\n\n  useEffect(() => {\n    Axios.get(\"/api/login\").then(response => {\n      if (response.data.loggedIn == true) {\n        console.log(response.data.user);\n        setLoggedIn(true);\n        setLoggedInUser(response.data.user.username);\n      }\n\n      ;\n    }).catch(error => {\n      setErrMessage(\"Error encountered on the server.\");\n    });\n  }, []);\n  useEffect(() => {\n    setLoading(true);\n    setDisplayimage(props.image);\n    setdimage(displayimage.slice(0, index + 2));\n    console.log(props.image);\n    console.log(displayimage);\n    console.log(dimage);\n    setLoading(false);\n  }, [props.image, displayimage]);\n\n  function filter(e, type) {\n    setLoading(true);\n    setActive(type);\n    console.log(type);\n\n    if (type == 'All') {\n      Axios.post(\"posts/all\", 3).then(response => {\n        setDisplayimage(response.data);\n        setdimage(displayimage.slice(0, index + 2));\n        setLoading(false);\n      }).catch(error => {\n        setErrMessage(\"Error encountered on the server.\");\n      });\n    }\n\n    if (type == 'Artwork') {\n      Axios.get('/posts/type?type=artwork').then(function (response) {\n        setDisplayimage(response.data['type search']);\n        setdimage(displayimage.slice(0, index + 2));\n        setLoading(false);\n      }).catch(error => {\n        setErrMessage(\"Error encountered on the server.\");\n      });\n    }\n\n    if (type == 'Photography') {\n      Axios.get('/posts/type?type=photography').then(function (response) {\n        setDisplayimage(response.data['type search']);\n        setdimage(displayimage.slice(index, index + 2));\n        setLoading(false);\n      }).catch(error => {\n        setErrMessage(\"Error encountered on the server.\");\n      });\n    }\n  }\n\n  if (dimage.length > 0) {\n    console.log(dimage);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"portfolio\",\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"GALLERY\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this), props.page == 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"This is your art space\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 32\n            }, this) || props.page == 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"To help an artist gather and give genuine critique anonymously from other artists\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 117\n              }, this), \"in order to replenish creativity and create better art\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 33\n            }, this) || props.page == 2 && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"This is what you critiqued\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"  \", errorMessage, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), props.page ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"  \", props.message, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n              children: types.map(type => /*#__PURE__*/_jsxDEV(ButtonToggle, {\n                variant: \"outline-light\",\n                active: active === type,\n                onClick: e => filter(e, type),\n                children: type\n              }, type, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: props.loaded == false && load == false ? /*#__PURE__*/_jsxDEV(ImageList, {\n              variant: \"masonry\",\n              cols: 3,\n              gap: 8,\n              children: displayimage.map(entry => /*#__PURE__*/_jsxDEV(ImageListItem, {\n                children: props.loggedIn ? /*#__PURE__*/_jsxDEV(\"a\", {\n                  onClick: e => {\n                    clickMe(e, entry);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    width: \"100%\",\n                    src: \"data:image/png;base64, \" + entry.image\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 82\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/login\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    width: \"100%\",\n                    src: \"data:image/png;base64, \" + entry.image\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 25\n                }, this)\n              }, entry.image, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 47\n            }, this) : /*#__PURE__*/_jsxDEV(\"center\", {\n              style: {\n                marginTop: \"7%\"\n              },\n              children: /*#__PURE__*/_jsxDEV(ReactLoading, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 51\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Comment, {\n        show: commentState,\n        onShow: () => setCommentState(true),\n        onHide: () => setCommentState(false),\n        entry: sentEntry\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this);\n  } else {\n    //there is a big problem here\n    console.log(\"this case\");\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"portfolio\",\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"GALLERY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this), props.page == 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"This is your art space\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 32\n          }, this) || props.page == 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"To help an artist gather and give genuine critique anonymously from other artists\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 117\n            }, this), \"in order to replenish creativity and create better art\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 33\n          }, this) || props.page == 2 && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"This is what you critiqued\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(ReactLoading, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(Gallery, \"gq93UIEodB9/4Ka22x8RlrzVQmg=\", false, function () {\n  return [useInfiniteScroll];\n});\n\n_c3 = Gallery;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ButtonToggle\");\n$RefreshReg$(_c2, \"ButtonGroup\");\n$RefreshReg$(_c3, \"Gallery\");","map":{"version":3,"sources":["/Users/AustinCai/Desktop/CS 370/ARC/Arc-FrontEnd-2.0/src/components/gallery.jsx"],"names":["Button","React","useState","useContext","useEffect","Comment","ImageList","ImageListItem","Axios","styled","useHistory","ReactLoading","Loader","display","useInfiniteScroll","ButtonS","button","ButtonToggle","active","ButtonGroup","div","types","Gallery","props","commentState","setCommentState","isLoggedIn","setLoggedIn","loggedInUser","setLoggedInUser","sentEntry","setSentEntry","setActive","load","setLoading","index","setIndex","loadMore","console","log","setdimage","displayimage","slice","dimage","setIsFetching","isFetching","setDisplayimage","errorMessage","setErrMessage","clickMe","event","entry","get","then","response","data","loggedIn","user","username","catch","error","image","filter","e","type","post","length","page","message","justifyContent","alignItems","map","loaded","marginTop"],"mappings":"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","sourcesContent":["\nimport { Button } from 'react-bootstrap';\nimport React, { useState, useContext, useEffect } from \"react\";\nimport Comment from \"./comment\";\nimport ImageList from \"@mui/material/ImageList\";\nimport ImageListItem from '@mui/material/ImageListItem';\nimport Axios from \"axios\";\nimport styled from 'styled-components';\nimport {useHistory} from \"react-router-dom\";\nimport ReactLoading from 'react-loading';\nimport {Loader} from 'semantic-ui-react';\nimport { display } from '@mui/system';\nimport useInfiniteScroll from \"./useInfiniteScroll\";\n\n\nconst ButtonS = styled.button`\nfont-size: 15;\nbackground:none;\ncolor: white;\nborder:none;\nmargin:10;\npadding:0;\ncursor: pointer;\n`;\nconst ButtonToggle = styled(ButtonS)`\n  opacity: 0.6;\n  ${({ active }) =>\n    active &&\n    `\n    opacity: 1;\n  `}\n`;\nconst ButtonGroup = styled.div`\n  display: flex;\n`;\nconst types = ['All', 'Artwork', 'Photography'];\n\n\nexport function Gallery(props) {\n  const [commentState, setCommentState] = useState(false);\n  const [isLoggedIn, setLoggedIn] = useState(false);\n  const [loggedInUser, setLoggedInUser] = useState('');\n  const[sentEntry,setSentEntry]=useState([]);\n  const [active, setActive] = useState('All');\n  const [ load, setLoading ] = useState(false);\n  const[index,setIndex]=useState(0);\n  function loadMore(){\n    setLoading(true);\nconsole.log('loading more');\n    setIndex(index+4);\n    setdimage(displayimage.slice(0,index+4));\n    console.log(index);\n    console.log(dimage);\n    setIsFetching(false)\n    setLoading(false);\n  }\n  const [isFetching, setIsFetching] = useState(useInfiniteScroll(loadMore));\n  const [dimage,setdimage]=useState([]);\n  const[displayimage, setDisplayimage] = useState([]);\n  const[errorMessage,setErrMessage]=useState('');\n  \n\n  function clickMe(event, entry){\n    // event.preventDefault();   \n    setCommentState(true);\n    setSentEntry(entry);\n  }\n \n\n \n\n  useEffect(() => {\n    Axios.get(\"/api/login\").then((response) => {\n      if (response.data.loggedIn == true) {\n        console.log(response.data.user);\n        setLoggedIn(true);\n        setLoggedInUser(response.data.user.username);\n      };\n    }).catch((error)=> {\n      setErrMessage(\"Error encountered on the server.\");\n    });\n  }, []);\n\n  useEffect(()=>{\n    setLoading(true);\n    setDisplayimage(props.image);\n    setdimage(displayimage.slice(0,index+2));\n    console.log(props.image);\n    console.log(displayimage);\n    console.log(dimage);\n    setLoading(false);\n  },[props.image,displayimage]\n  );\n\n  function filter(e, type){\n    setLoading(true);\n    setActive(type);\n    console.log(type)\n    if (type == 'All'){\n      Axios.post(\"posts/all\",3).then((response)=>{\n        setDisplayimage(response.data);\n        setdimage(displayimage.slice(0,index+2));\n        setLoading(false);\n      }).catch((error)=> {\n        setErrMessage(\"Error encountered on the server.\");\n      });\n    }\n    if (type == 'Artwork'){\n      Axios.get('/posts/type?type=artwork')\n      .then(function (response) {\n        setDisplayimage(response.data['type search']);\n        setdimage(displayimage.slice(0,index+2));\n      \n        setLoading(false);\n      }).catch((error)=> {\n        setErrMessage(\"Error encountered on the server.\");\n      });\n    }\n    if (type == 'Photography'){\n      Axios.get('/posts/type?type=photography')\n      .then(function (response) {\n        setDisplayimage(response.data['type search']);\n        setdimage(displayimage.slice(index,index+2));\n      \n        setLoading(false);\n      }).catch((error)=> {\n        setErrMessage(\"Error encountered on the server.\");\n      });\n    }\n  }\n\n  if (dimage.length>0) {\n    console.log(dimage);\n    return (\n      <div>\n        <div id='portfolio' className='text-center'>\n          <div className='container'> \n            <div className='section-title'>\n              <p>\n                GALLERY\n              </p>\n              <br></br>\n              <br></br>\n              <br></br>\n              {(props.page==1&&<p>This is your art space</p>)\n          \n              ||(props.page==0&&<p>To help an artist gather and give genuine critique anonymously from other artists<br></br>in order to replenish creativity and create better art\n              </p> )\n              ||(props.page==2&&<p>This is what you critiqued</p>)}\n              \n            </div> \n            <p>  {errorMessage} </p>\n\n            {props.page?\n            <div>\n            <p>  {props.message} </p>\n            </div>:               \n            <div \n                style={{\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\"\n                }}>\n                \n                <ButtonGroup>\n                {types.map(type => (\n                  <ButtonToggle\n                    variant=\"outline-light\"\n                    key={type}\n                    active={active === type}\n                    onClick={\n                      (e) => filter(e, type)\n                    }\n                  > \n                 \n                  {type}\n                  </ButtonToggle>\n                ))}\n                </ButtonGroup>\n                </div>}\n                <p>\n                </p>\n            <div>\n           {props.loaded==false&&load==false? <ImageList variant=\"masonry\" cols={3} gap={8}>\n                  {displayimage.map((entry) => (                    \n                    <ImageListItem key={entry.image}>\n                      {props.loggedIn ? <a onClick={(e) => {clickMe(e, entry)}} ><img width=\"100%\" src={\"data:image/png;base64, \" + entry.image}></img></a> :\n                        <a href='/login'><img width=\"100%\" src={\"data:image/png;base64, \" + entry.image}></img></a>}\n                    </ImageListItem>\n                  ))\n                  }\n                </ImageList>\n                :<center style={{marginTop:\"7%\"}}><ReactLoading/></center>}\n            </div>\n          </div>\n        </div>\n\n        <Comment show={commentState} onShow={() => setCommentState(true)}\n          onHide={() => setCommentState(false) } entry={sentEntry} />\n\n      </div>\n\n    )\n  } else { //there is a big problem here\n    console.log(\"this case\");\n    return (\n      <div id='portfolio' className='text-center'>\n          <div className='container'> \n            <div className='section-title'>\n              <p>\n                GALLERY\n              </p>\n              <br></br>\n              <br></br>\n              <br></br>\n              {(props.page==1&&<p>This is your art space</p>)\n          \n              ||(props.page==0&&<p>To help an artist gather and give genuine critique anonymously from other artists<br></br>in order to replenish creativity and create better art\n              </p> )\n              ||(props.page==2&&<p>This is what you critiqued</p>)}\n              \n            </div> \n      {/* <p>  {\"We ran out of images for you\"} </p> */}\n      <center>\n      <ReactLoading/>\n      </center>\n      </div>\n      </div>\n\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}